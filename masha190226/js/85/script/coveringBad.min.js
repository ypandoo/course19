/*
 *  Project     : Covering Bad
 *  Description : A simple jQuery Plugin for cover an item by another item with dragging ability.
 *  Author      : Mojtaba Seyedi
 *  License     : MIT  http://seyedi.mit-license.org
*/
(function(a){a.fn.coveringBad=function(b){var c=a.extend({marginY:30,marginX:30,setX:30,setY:30,direction:"horizontal"},b);return this.each(function(){var f=a(this),d=f.find(">.changeable"),e=f.find(">.handle"),t=f.innerWidth(),i=f.innerHeight(),n=null,o=null,r=null,s=null,l=c.marginX,j=t-c.marginX,m=c.marginY,k=i-c.marginY,p=c.setX,q=c.setY;f.css("background-image","url("+f.data("passive")+")");d.css("background-image","url("+f.data("active")+")");d.height(f.height());if(p<l){p=l}if(q<m){q=m}e.append('<span class="left icon-chevron-left"></span><span class="right icon-chevron-right"/></span>');e.css("left",p);e.css("top",q);if(c.direction==="horizontal"){d.width(p);d.css("border-right","1px dashed #FFF")}else{if(c.direction==="vertical"){f.height(d.height());d.height(q);d.css("border-bottom","1px dashed #FFF");e.addClass("vertical")}}e.on("mousedown",function(u){u.preventDefault();e.addClass("draggable");n=parseInt(e.css("left"));r=u.pageX;o=parseInt(e.css("top"));s=u.pageY});a(document).on("mouseup",function(u){e.removeClass("draggable")});f.bind("mousemove",h);function h(u){var v=n+(u.pageX-r);if(v<l){v=l}else{if(v>j){v=j}}a(".draggable").css("left",v);var w=o+(u.pageY-s);if(w<m){w=m}else{if(w>k){w=k}}a(".draggable").css("top",w);if(a(".draggable").length){g(v,w)}}function g(v,u){if(c.direction==="horizontal"){d.width(v)}else{if(c.direction==="vertical"){d.height(u)}}}})}})(jQuery);